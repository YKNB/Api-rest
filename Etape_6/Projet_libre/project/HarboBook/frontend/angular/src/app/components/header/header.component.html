<nav class="navbar navbar-expand-lg navbar-light bg-light mb-3 fixed-top" >
  
  <a class="navbar-brand" [routerLink]="'.'">
    <img alt="image" [src]="introLogo" width="112" height="30">
  </a>

  <button class="navbar-toggler" type="button" (click)="isMenuCollapsed = !isMenuCollapsed">
    &#9776;
  </button>


  <div [ngbCollapse]="isMenuCollapsed" class="collapse navbar-collapse">
    <ul class="navbar-nav">
      <li class="nav-item">

        <a class="nav-link" routerLink="/home" routerLinkActive="active" (click)="isMenuCollapsed = true">Home</a>
      </li>
     <li class="nav-item" *ngIf="(userRole$ | async) === 'ROLE_ADMIN'">
        <a class="nav-link" routerLink="/gestionnaireUser"  routerLinkActive="active" (click)="isMenuCollapsed = true">Gestionnaire User</a>
      </li><li class="nav-item" *ngIf="(userRole$ | async) === 'ROLE_ADMIN' || (userRole$ | async) === 'ROLE_USER'">
        <a class="nav-link" routerLink="/gestionnaireAddress"  routerLinkActive="active" (click)="isMenuCollapsed = true">Gestionnaire d'adresse</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" routerLink="/gestionnaireBook" *ngIf="(userRole$ | async) === 'ROLE_ADMIN'" routerLinkActive="active" (click)="isMenuCollapsed = true">Gestionnaire livre</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" routerLink="/products" routerLinkActive="active" (click)="isMenuCollapsed = true">Librairie</a>
      </li>
      <li class="nav-item" *ngIf="(userRole$ | async) === 'ROLE_ADMIN' || (userRole$ | async) === 'ROLE_USER'
      || (userRole$ | async) === 'ROLE_GUEST'">
        <a class="nav-link" routerLink="/profile" routerLinkActive="active" (click)="isMenuCollapsed = true">Profile</a>
      </li>
    </ul>

    <div class="navbar-collapse" [class.collapse]="isMenuCollapsed" id="navbarContent">
      <ul class="navbar-nav ml-auto">

        <li class="nav-item" ngbDropdown display="dynamic" placement="bottom-right">
          <a class="nav-link" tabindex="0" ngbDropdownToggle id="navbarDropdown3" role="button">
            <i class="fas fa-user-circle fa-2x"></i>
          </a>
          <div ngbDropdownMenu aria-labelledby="navbarDropdown3" class="dropdown-menu">
            <div id="login" [hidden]="checkConnected()" >
              <form class="px-4 py-3">
                <div class="form-group">
                  <label for="exampleDropdownFormEmail1">Username</label>
                  <input type="email" [(ngModel)]="username" name="username" class="form-control" id="exampleDropdownFormEmail1" placeholder="username">
                </div>
                <div class="form-group">
                  <label for="exampleDropdownFormPassword1">Password</label>
                  <input type="password" [(ngModel)]="password" name="password" class="form-control" id="exampleDropdownFormPassword1" placeholder="Password">
                </div>
                <div class="form-check">
                  <input type="checkbox" class="form-check-input" id="dropdownCheck">
                  <label class="form-check-label" for="dropdownCheck">
                    Remember me
                  </label>
                </div>
                <button type="submit" (click)="makeAuth()" class="btn btn-primary">Connexion</button>
              </form>
              <div class="dropdown-divider"></div>
              <button routerLink="/register" ngbDropdownItem>New around here? Sign up</button>
            </div>
            <div *ngIf="successMessage" class="alert alert-success">
              {{ successMessage }}
            </div>
            <div *ngIf="errorMessage" class="alert alert-danger">
              {{ errorMessage }}
            </div>
            <div id="logout" [hidden]="!checkConnected()">
              <div>
                <p>Username: {{ getUsername() }}</p>
                <p>Role: {{ userRole$ | async }}</p> 
                <p>Token: {{ getToken() }}</p>
              </div>
              <button type="submit" (click)="disconnected()" class="btn btn-primary">d√©connexion</button>
        
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>
